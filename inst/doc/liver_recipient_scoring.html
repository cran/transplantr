<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Liver transplant risk stratification</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Liver transplant risk stratification</h1>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<div id="adult-risk-stratification" class="section level2">
<h2>Adult risk stratification</h2>
<p>The <strong>MELD</strong> score was originally developed at the Mayo Clinic to risk stratify elective transhepatic porto-systemic shunt (TIPS) procedures in patients with liver cirrhosis(<em>1</em>). It has also been widely used as part of clinical urgency prioritisation in liver transplant matching algorithms, although UNOS changed to the alternative <strong>MELD-Na</strong> score(<em>2</em>), which incorporates serum sodium levels, in January 2016. The scores have been shown to predict short-term mortality after transhepatic porto-systemic shunt (TIPS) procedure, non-liver transplant surgery in cirrhotic patients, acute alcoholic hepatitis and acute variceal haemorrhage.</p>
<p>The <strong>UKELD</strong> score was developed to risk stratify liver transplant recipients in the UK, is based on MELD and adds serum sodium(<em>3</em>).</p>
<p>MELD and UKELD are primarily intended to predict waiting list mortality and therefore urgency for transplant, but perform relatively poorly at predicting survival after liver transplant(<em>4-6</em>). The <strong>SOFT</strong> (Survival Outcomes Following Liver Transplantation) Score was developed by at Columbia University to predict recipient survival after liver transplantation(<em>7</em>). Another score using a composite of donor and recipient characteristics is the <strong>BAR</strong> (Balance of Risk) score, which is based on a sample of American and European liver transplants and achieved a c-statistic of 0.7 when predicting patient survival(<em>8</em>).</p>
<p>There are also two scores using donor characteristics to predict outcome, the <strong>DRI</strong> (Donor Risk Index) developed in the USA(<em>9</em>), and the derivative <strong>ET-DRI</strong> (Eurotransplant Donor Risk Index) adapted to the European donor population, which achieved a c-statistic of and 0.626 in the European population(<em>10</em>).</p>
</div>
<div id="risk-stratification-in-children" class="section level2">
<h2>Risk stratification in children</h2>
<p>As the adult formulae do not work well at predicting outcomes in children, the <strong>PELD</strong> score was developed to predict waiting list mortality(<em>11</em>), and <strong>Pedi-SOFT</strong> to predict outcome after transplantation(<em>12</em>).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(transplantr)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a></code></pre></div>
</div>
</div>
<div id="meld-and-meld-na-scores" class="section level1">
<h1>MELD and MELD-Na scores</h1>
<p>The original MELD score uses serum creatinine, bilirubin and INR, but cannot be simply calculated as creatinine and bilirubin values are set to specific numbers when outside a set range. Creatinine &lt;1mg/dl is entered as 1, or &gt;4mg/dl as 4, and patients who are either on CVVH or have been dialysed twice in the week prior to the calculation are assigned a fixed value of 4mg/dl. Bilirubin levels less than 1mg/dl are also set to 1, as are INR values of less than 1. The final score ranges between 6 and 40.</p>
<p><span class="math display">\[MELD = 10 \times (0.957 \times log_e creatinine \times 0.378 \times log_e~bilirubin + 1.120 \times  log_e INR + 0.643)\]</span></p>
<p>To get the exact MELD score as recommended by UNOS, the part of the equation above in the brackets is rounded to the tenth decimal place before being multiplied by 10.</p>
<p>The MELD-Na score adds serum sodium levels into the mix if the MELD score is greater than 11. The actual sodium level is only used if sodium is between 125 and 137 mmol/l. If the actual level is less than 125, the value 125 is used in the equation, and if more than 137, a fixed value of 137 is assigned.</p>
<p><span class="math display">\[MELDNa = MELD + 1.32 \times (137 - Na) - [0.033 \times MELD \times (137 - Na)]\]</span></p>
<p>The <code>meld()</code> function in <em>transplantr</em> calculates the MELD score with these value assignments taken into account. Creatinine and bilirubin are both calculated from their values in µmol/l by default, and can be changed to mg/dl either by setting the optional <code>units</code> parameter to <code>&quot;US&quot;</code> or by using the <code>meld_US()</code> wrapper function instead. It is a vectorised function and can therefore be applied to a whole series at once, for example in a <em>dplyr</em> pipe:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># load dataset</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">data</span>(<span class="st">&quot;liver.pts&quot;</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co"># remove redundant variables and calculate MELD</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">oltx_data =<span class="st"> </span>liver.pts <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>Patient.Age, <span class="op">-</span>Patient.Sodium) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">MELD =</span> <span class="kw">meld</span>(<span class="dt">INR =</span> Patient.INR, <span class="dt">bili =</span> Patient.Bilirubin, </a>
<a class="sourceLine" id="cb2-8" data-line-number="8">                     <span class="dt">creat =</span> Patient.Creatinine, <span class="dt">dialysis =</span> Patient.Dialysed))</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co"># display result</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11">oltx_data</a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt;   Patient.INR Patient.Bilirubin Patient.Creatinine Patient.Dialysed     MELD</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt; 1         1.4                22                120                0 14.07569</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; 2         2.1                34                450                1 30.60446</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt; 3         1.6                26                 77                0 13.27793</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt; 4         4.9                51                228                0 37.42734</span></a></code></pre></div>
<p>It will also work to calculate MELD score for a single case:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">meld</span>(<span class="dt">INR =</span> <span class="fl">2.0</span>, <span class="dt">bili =</span> <span class="fl">3.1</span>, <span class="dt">creat =</span> <span class="fl">1.9</span>, <span class="dt">dialysis =</span> <span class="dv">0</span>, <span class="dt">units =</span> <span class="st">&quot;US&quot;</span>)</a></code></pre></div>
<p>The <code>meld_na()</code> function calculates the newer MELD-Na score using SI units for creatinine and bilirubin. Changing to US units can be done by setting <code>units</code> to <code>&quot;US&quot;</code> or using the <code>meld_na_US()</code> wrapper function. <code>meld_na()</code> is also a vectorised function and can be called from within a <em>dplyr</em> pipe or for single cases in the same way as the <code>meld()</code> function.</p>
<p>It is worth noting that for liver allocation in the USA, additional points are added to the MELD score in the context of certain specified clinical conditions known as “standard MELD exceptions”. These increase the MELD score by 10% every 3 months from diagnosis. Guidance on MELD, MELD-Na and PELD in US liver matching is available at the <a href="https://optn.transplant.hrsa.gov">OPTN website</a>.</p>
</div>
<div id="ukeld-score" class="section level1">
<h1>UKELD score</h1>
<p>The UKELD score was developed in the UK before the MELD-Na had been published, and includes the same variables as MELD-Na: creatinine, bilirubin, INR and sodium. Although it has not been used in liver matching in the UK, a UKELD score greater than 49 has been a criterion for eligibility to join the liver transplant waiting list.</p>
<p>The score can be calculated with the <code>ukeld()</code> function, using µmol/l as the default unit for creatinine and bilirubin. This can be changed to mg/dl by setting the <code>units</code> parameter to <code>&quot;US&quot;</code> or calling the <code>ukeld_US()</code> wrapper function.</p>
</div>
<div id="soft-score" class="section level1">
<h1>SOFT score</h1>
<p>The SOFT score (<em>7</em>) aims to predict post-transplant survival in adult liver recipients using 19 risk factors. There is also a pre-procurement P-SOFT score which uses the 14 risk factors known before a specific donor liver is offered for transplantation and can be used to risk stratify patients while still on the waiting list.</p>
<p>There are three key functions in <em>transplantr</em> to calculate SOFT scores. The <code>soft()</code> function is a vectorised function to calculate the full 19-variable SOFT score, and the <code>p_soft()</code> function calculates the 14-variable P-SOFT score. There is also a <code>soft2()</code> function to calculate the full SOFT score for patients for whom P-SOFT has already been calculated. The functions use creatinine and albumin, which default to standard international units of µmol/l and g/l, but can be used with US units (mg/dl and g/dl) by setting the optional <code>Units</code> parameter to <code>&quot;US&quot;</code> or by calling any of the wrapper functions using US units by default: <code>soft_US()</code>, <code>p_soft_US()</code> and <code>soft2_US()</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># calculate full SOFT score using international units</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">soft</span>(<span class="dt">Age =</span> <span class="dv">35</span>, <span class="dt">BMI =</span> <span class="dv">20</span>, <span class="dt">PrevTx =</span> <span class="dv">0</span>, <span class="dt">AbdoSurg =</span> <span class="dv">1</span>, <span class="dt">Albumin =</span> <span class="dv">30</span>, <span class="dt">Dx =</span> <span class="dv">0</span>, </a>
<a class="sourceLine" id="cb4-3" data-line-number="3">     <span class="dt">ICU =</span> <span class="dv">0</span>, <span class="dt">Admitted =</span> <span class="dv">0</span>, <span class="dt">MELD =</span> <span class="dv">29</span>, <span class="dt">LifeSupport =</span> <span class="dv">0</span>, <span class="dt">Encephalopathy =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb4-4" data-line-number="4">     <span class="dt">PVThrombosis =</span> <span class="dv">0</span>, <span class="dt">Ascites =</span> <span class="dv">1</span>, <span class="dt">PortalBleed =</span> <span class="dv">0</span>, <span class="dt">DonorAge =</span> <span class="dv">44</span>, </a>
<a class="sourceLine" id="cb4-5" data-line-number="5">     <span class="dt">DonorCVA =</span> <span class="dv">0</span>, <span class="dt">DonorSCr =</span> <span class="dv">110</span>, <span class="dt">National =</span> <span class="dv">0</span>, <span class="dt">CIT =</span> <span class="dv">8</span>) </a>
<a class="sourceLine" id="cb4-6" data-line-number="6"></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co"># calculate full SOFT score using US units</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="kw">soft</span>(<span class="dt">Age =</span> <span class="dv">35</span>, <span class="dt">BMI =</span> <span class="dv">20</span>, <span class="dt">PrevTx =</span> <span class="dv">0</span>, <span class="dt">AbdoSurg =</span> <span class="dv">1</span>, <span class="dt">Albumin =</span> <span class="fl">3.0</span>, <span class="dt">Dx =</span> <span class="dv">0</span>, </a>
<a class="sourceLine" id="cb4-9" data-line-number="9">     <span class="dt">ICU =</span> <span class="dv">0</span>, <span class="dt">Admitted =</span> <span class="dv">0</span>, <span class="dt">MELD =</span> <span class="dv">29</span>, <span class="dt">LifeSupport =</span> <span class="dv">0</span>, <span class="dt">Encephalopathy =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb4-10" data-line-number="10">     <span class="dt">PVThrombosis =</span> <span class="dv">0</span>, <span class="dt">Ascites =</span> <span class="dv">1</span>, <span class="dt">PortalBleed =</span> <span class="dv">0</span>, <span class="dt">DonorAge =</span> <span class="dv">44</span>, </a>
<a class="sourceLine" id="cb4-11" data-line-number="11">     <span class="dt">DonorCVA =</span> <span class="dv">0</span>, <span class="dt">DonorSCr =</span> <span class="fl">1.2</span>, <span class="dt">National =</span> <span class="dv">0</span>, <span class="dt">CIT =</span> <span class="dv">8</span>, <span class="dt">Units =</span> <span class="st">&quot;US&quot;</span>)</a>
<a class="sourceLine" id="cb4-12" data-line-number="12"></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co"># calculate P-SOFT score</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="kw">p_soft</span>(<span class="dt">Age =</span> <span class="dv">65</span>, <span class="dt">BMI =</span> <span class="dv">36</span>, <span class="dt">PrevTx =</span> <span class="dv">2</span>, <span class="dt">AbdoSurg =</span> <span class="dv">1</span>, <span class="dt">Albumin =</span> <span class="dv">29</span>, </a>
<a class="sourceLine" id="cb4-15" data-line-number="15">       <span class="dt">Dx =</span> <span class="dv">0</span>, <span class="dt">ICU =</span> <span class="dv">0</span>, <span class="dt">Admitted =</span> <span class="dv">1</span>, <span class="dt">MELD =</span> <span class="dv">32</span>, <span class="dt">LifeSupport =</span> <span class="dv">0</span>, </a>
<a class="sourceLine" id="cb4-16" data-line-number="16">       <span class="dt">Encephalopathy =</span> <span class="dv">1</span>, <span class="dt">PVThrombosis =</span> <span class="dv">1</span>, <span class="dt">Ascites =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb4-17" data-line-number="17"></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co"># calculate P-SOFT with US units</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="kw">p_soft_US</span>(<span class="dt">Age =</span> <span class="dv">65</span>, <span class="dt">BMI =</span> <span class="dv">36</span>, <span class="dt">PrevTx =</span> <span class="dv">2</span>, <span class="dt">AbdoSurg =</span> <span class="dv">1</span>, <span class="dt">Albumin =</span> <span class="fl">2.9</span>, </a>
<a class="sourceLine" id="cb4-20" data-line-number="20">          <span class="dt">Dx =</span> <span class="dv">0</span>, <span class="dt">ICU =</span> <span class="dv">0</span>, <span class="dt">Admitted =</span> <span class="dv">1</span>, <span class="dt">MELD =</span> <span class="dv">32</span>, <span class="dt">LifeSupport =</span> <span class="dv">0</span>, </a>
<a class="sourceLine" id="cb4-21" data-line-number="21">          <span class="dt">Encephalopathy =</span> <span class="dv">1</span>,<span class="dt">PVThrombosis =</span> <span class="dv">1</span>, <span class="dt">Ascites =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb4-22" data-line-number="22"></a>
<a class="sourceLine" id="cb4-23" data-line-number="23"><span class="co"># adding P-SOFT and SOFT as two variables to a tibble using a dplyr pipe</span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24">liver.recipients =<span class="st"> </span>liver.recipients <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-25" data-line-number="25"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">P.Soft =</span> <span class="kw">p_soft</span>(age, bmi, prev.tx, abdo.surg, albumin, dialysis,</a>
<a class="sourceLine" id="cb4-26" data-line-number="26">                         icu, admitted, meld.score, life.support,</a>
<a class="sourceLine" id="cb4-27" data-line-number="27">                         encephalopathy, pv.thrombosis, ascites),</a>
<a class="sourceLine" id="cb4-28" data-line-number="28">         <span class="dt">Soft =</span> <span class="kw">soft2</span>(P.Soft, portal.bleed, donor.age, donor.cva, donor.SCr,</a>
<a class="sourceLine" id="cb4-29" data-line-number="29">                      sharing, cit))</a></code></pre></div>
</div>
<div id="dri-and-et-dri" class="section level1">
<h1>DRI and ET-DRI</h1>
<p>The American DRI score can be calculated using the <code>liver_dri()</code> function and European ET-DRI using the <code>et_dri()</code> function.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># calculate DRI</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">liver_dri</span>(<span class="dt">age =</span> <span class="dv">64</span>, <span class="dt">cod =</span> <span class="st">&quot;cva&quot;</span>, <span class="dt">eth =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">dcd =</span> <span class="dv">0</span>, </a>
<a class="sourceLine" id="cb5-3" data-line-number="3">          <span class="dt">split =</span> <span class="dv">0</span>, <span class="dt">share =</span> <span class="st">&quot;local&quot;</span>, <span class="dt">cit =</span> <span class="dv">14</span>, <span class="dt">height =</span> <span class="dv">170</span>)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co"># calculate ET-DRI</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="kw">et_dri</span>(<span class="dt">age =</span> <span class="dv">39</span>, <span class="dt">cod =</span> <span class="st">&quot;trauma&quot;</span>, <span class="dt">dcd =</span> <span class="dv">0</span>, <span class="dt">split =</span> <span class="dv">0</span>, </a>
<a class="sourceLine" id="cb5-7" data-line-number="7">       <span class="dt">share =</span> <span class="st">&quot;local&quot;</span>, <span class="dt">cit =</span> <span class="dv">8</span>, <span class="dt">ggt =</span> <span class="dv">50</span>, <span class="dt">rescue =</span> <span class="dv">0</span>)</a></code></pre></div>
</div>
<div id="peld-score" class="section level1">
<h1>PELD score</h1>
<p>The PELD score(<em>9</em>) is a paediatric version of MELD, and used to predict mortality in children needing liver transplants. It is based on age, bilirubin, albumin, INR and whether there is growth failure.</p>
<p>The <code>peld()</code> function in <em>transplantr</em> calculates the PELD score. Bilirubin is calculated from their values in µmol/l and albumin in g/l by default, and can be changed to mg/dl and g/dl respectively either by setting the optional <code>units</code> parameter to <code>&quot;US&quot;</code> or by using the <code>peld_US()</code> wrapper function instead. In the event that albumin is measured locally in g/l and bilirubin in mg/dl, take care to convert it by dividing by 10. Similarly, if albumin is reported in g/dl and bilirubin in µmol/l, multiply the albumin results by 10. The conversion is easily done for a series in a vectorised way by including it in a <em>dplyr</em> pipe:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># calculate PELD where lab reports albumin in g/dl and bilirubin in µmol/l</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">paed.oltx2 =<span class="st"> </span>paed.oltx <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">AlbuminX10 =</span> Patient.Albumin <span class="op">*</span><span class="st"> </span><span class="dv">10</span>,</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">         <span class="dt">PELD =</span> <span class="kw">peld</span>(<span class="dt">INR =</span> Patient.INR, <span class="dt">bili =</span> Patient.Bilirubin, <span class="dt">albumin =</span> AlbuminX10,</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">                     <span class="dt">listing_age =</span> Patient.ListAge, <span class="dt">growth_failure =</span> Patient.GrowthFailure))</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co"># calculate PELD where lab reports albumin in g/l and bilirubin in mg/dl</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">paed.oltx2 =<span class="st"> </span>paed.oltx <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">AlbuminDiv10 =</span> Patient.Albumin <span class="op">/</span><span class="st"> </span><span class="dv">10</span>,</a>
<a class="sourceLine" id="cb6-10" data-line-number="10">         <span class="dt">PELD =</span> <span class="kw">peld_US</span>(<span class="dt">INR =</span> Patient.INR, <span class="dt">bili =</span> Patient.Bilirubin, <span class="dt">albumin =</span> AlbuminDiv10,</a>
<a class="sourceLine" id="cb6-11" data-line-number="11">                     <span class="dt">listing_age =</span> Patient.ListAge, <span class="dt">growth_failure =</span> Patient.GrowthFailure))</a></code></pre></div>
</div>
<div id="pedi-soft" class="section level1">
<h1>Pedi-SOFT</h1>
<p>The Pedi-SOFT score (<em>10</em>) is intended to predict post-transplant survival in children undergoing liver transplants, and has been demonstrated to predict survival both with infants and children aged 1-12, with c-statistic of 0.70 and 0.77 respectively.</p>
<p>The score is based on whether a cadaveric technical variant graft was used, recipient weight, whether recipient is on dialysis or has creatinine clearance less than 30ml/min before transplant, whether recipient required life support before transplant and number of any previous transplants.</p>
<p>The <code>pedi_soft()</code> function in <em>transplantr</em> will calculate the Pedi-SOFT score, and like most other functions in the package it is a vectorised function.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># calculate Pedi-SOFT score</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw">pedi_soft</span>(<span class="dt">CTVG =</span> <span class="dv">1</span>, <span class="dt">Weight =</span> <span class="dv">10</span>, <span class="dt">Dx =</span> <span class="dv">0</span>, <span class="dt">LifeSupport =</span> <span class="dv">0</span>, <span class="dt">PrevTx =</span> <span class="dv">0</span>) <span class="co"># 4</span></a></code></pre></div>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<ol style="list-style-type: decimal">
<li><p>Kamath PS, Wiesner RH, Malinchoc M, et al. A model to predict survival in patients with end-stage liver disease. <em>Hepatology</em> 2001; 33:464-470. DOI: <a href="https://doi.org/10.1053/jhep.2001.22172">10.1053/jhep.2001.22172</a></p></li>
<li><p>Biggins SW, Kim WR, Terrault NA, et al. Evidence-based incorporation of serum sodium concentration into MELD. <em>Gastroenterology</em> 2006; 130(6):1652-60. DOI: <a href="https://doi.org/10.1053/j.gastro.2006.02.010">10.1053/j.gastro.2006.02.010</a></p></li>
<li><p>Barber KM, Madden S, Allen J, et al. Elective liver transplant list mortality: development of a United Kingdom end-stage liver disease score. <em>Transplantation</em> 2011; 92(4):469-76. DOI: <a href="https://doi.org/10.1097/TP.0b013e318225db4d">10.1097/TP.0b013e318225db4d</a>.</p></li>
<li><p>Wiesner R, Edwards E, Freeman R, et al. United Network for Organ Sharing Liver Disease Severity Score Committee. Model for end-stage liver disease (MELD) and allocation of donor livers. <em>Gastroenterology</em> 2003: 124:91-96.</p></li>
<li><p>Brown RS Jr, Kumar KS, Russo MW, et al. Model for end-stage liver disease and Child-Turcotte-Pugh score as predictors of pre-transplantation disease severity, posttransplantation outcome, and resource utilization in the United Network for Organ Sharing status 2A patients. <em>Liver Transplant</em> 2002: 8:278-284.</p></li>
<li><p>Desai NM, Mange KC, Crawford MD, et al. Predicting outcome after liver transplantation: Utility of the model of end-stage liver disease and a newly derived discrimination function. <em>Transplantation</em> 2004; 77:99-106.</p></li>
<li><p>Rana A, Hardy MA, Halazun KJ, et al. Survival Outcomes Following Liver Transplantation (SOFT) Score: A Novel Method to Predict Patient Survival Following Liver Transplantation. <em>American Journal of Transplantation</em> 2008: 8:2537-2546. DOI: <a href="https://doi.org/10.1111/j.1600-6143.2008.02400.x">10.1111/j.1600-6143.2008.02400.x</a></p></li>
<li><p>Dutkowski P, Oberkofler CE, Slankamenac K, et al. Are There Better Guidelines for Allocation in Liver Transplantation? A Novel Score Targeting Justice and Utility in the Model for End-Stage Liver Disease Era. Annals of Surgery 2011; 254:745-753. DOI: <a href="https://doi.org/10.1097/SLA.0b013e3182365081">10.1097/SLA.0b013e3182365081</a></p></li>
<li><p>Feng S, Goodrich NP, Bragg-Gresham JL, et al. Characteristics Associated with Liver Graft Failure: The Concept of a Donor Risk Index. <em>American Journal of Transplantation</em> 2006; 6:783–790. DOI: <a href="https://doi.org/10.1111/j.1600-6143.2006.01242.x">10.1111/j.1600-6143.2006.01242.x</a></p></li>
<li><p>Braat AE, Blok JJ, Putter H, et al. The Eurotransplant Donor Risk Index in Liver Transplantation: ET-DRI. American Journal of Transplantation 2012; 12:2789–2796. <a href="https://doi.org/10.1111/j.1600-6143.2012.04195.x">10.1111/j.1600-6143.2012.04195.x</a></p></li>
<li><p>McDiarmid SV, Anand R, Lindblad AS, et. al. Development of a pediatric end-stage liver disease score to predict poor outcome in children awaiting liver transplantation. <em>Transplantation</em> 2002; 74(2):173-81. DOI: <a href="https://doi.org/10.1097/00007890-200207270-00006">10.1097/00007890-200207270-00006</a></p></li>
<li><p>Rana A, Pallister ZS, Guiteau JJ, et al. Survival Outcomes Following Pediatric Liver Transplantation (Pedi-SOFT) Score: A Novel Predictive Index. <em>American Journal of Transplantation</em> 2015; 15:1855-1863. DOI: <a href="https://doi.org/10.1111/ajt.13190">10.1111/ajt.13190</a></p></li>
</ol>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
